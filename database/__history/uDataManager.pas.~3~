unit uDataManager;

interface

uses
    System.SysUtils
  , System.Classes

  , Aurelius.Engine.ObjectManager
  , Aurelius.Linq
  , Aurelius.Comp.Connection
  , Aurelius.Comp.Manager
  , Aurelius.Engine.DatabaseManager

  , Data.DB

  , FireDAC.Comp.Client
  , FireDAC.Stan.Intf
  , FireDAC.Stan.Option
  , FireDAC.Stan.Error
  , FireDAC.UI.Intf
  , FireDAC.Phys.Intf
  , FireDAC.Stan.Def
  , FireDAC.Phys
  , FireDAC.Stan.Pool
  , FireDAC.Stan.Async
  , FireDAC.VCLUI.Wait

  ;

type
  TDataManager = class(TDataModule)
    FDManager1: TFDManager;
    FDConnection1: TFDConnection;
    AureliusManager: TAureliusManager;
    AureliusConnection: TAureliusConnection;
  private
    { Private declarations }
    procedure UpdateDatabaseSchema;
  public
    { Public declarations }
  end;

var
  DataManager: TDataManager;

implementation

{%CLASSGROUP 'Vcl.Controls.TControl'}

{$R *.dfm}

{ TDataManager }

procedure TDataManager.UpdateDatabaseSchema;
var
  DBManager: TDatabaseManager;
begin
  DBManager := TDatabaseManager.Create(AureliusConnection);
  try
    // Create or update the database schema
    DBManager.UpdateDatabase;
  finally
    DBManager.Free;
  end;

end;

end.
